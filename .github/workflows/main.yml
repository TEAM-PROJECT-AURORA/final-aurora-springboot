name: CI/CD Workflow  # 워크플로우 이름

on:  # 워크플로를 트리거하는 이벤트를 지정
  push:  # 푸시 이벤트 발생 시 트리거
    branches: [feature/*, develop, main, release]  # 다음 브랜치에서 푸시 이벤트가 발생하면 워크플로를 실행

jobs:  # 워크플로우에 대한 하나 이상의 작업을 정의
  build:  # 작업 이름
    runs-on: ubuntu-latest  # 작업을 실행할 러너 유형을 지정

    steps:  # 작업에서 실행할 단계의 순서를 정의
      - name: Checkout code  # 단계 이름
        uses: actions/checkout@v2  # 레파지토리의 코드를 체크아웃

      - name: Build and test code  # 단계 이름
        run: |  # 명령 실행
          if [[ $GITHUB_REF == refs/heads/feature/* ]]; then
            # 빌드,테스트 feature 브랜치
            # 기능 브랜치에서 푸시 이벤트가 발생하면 다음 코드를 실행
          elif [[ $GITHUB_REF == refs/heads/develop ]]; then
            # feature 브랜치들을 머지, 빌드하고 테스트 develop 브랜치
            # 개발 브랜치에서 푸시 이벤트가 발생하면 다음 코드를 실행
          elif [[ $GITHUB_REF == refs/heads/main ]]; then
            # 배포 브랜치
            # 메인 브랜치에서 푸시 이벤트가 발생하면 다음 코드를 실행
          elif [[ $GITHUB_REF == refs/heads/release ]]; then
            # 오류수정하고 빌드, 테스트하는 release 브랜치
            # 릴리스 브랜치에서 푸시 이벤트가 발생하면 다음 코드를 실행
          fi  # if문 끝
